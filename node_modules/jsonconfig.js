var fs = require('fs');

function requireModule(opt) {
  myOpt = opt || {};
  var directory = myOpt.directory || 'config';
  if(directory.indexOf('.') === -1) {
    var fullDirectoryName = process.cwd() + '\\' + directory;
    var directoryContent = fs.readdirSync(fullDirectoryName);

    if(directoryContent[0]) {
      var config = JSON.parse(fs.readFileSync(fullDirectoryName + "\\" + directoryContent[0]));
      return config
    } else {

      throw new Error("No configuration file found in " + fullDirectoryName);
    }
  }
}

exports.requireModule = requireModule;